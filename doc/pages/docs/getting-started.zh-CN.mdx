import Link from 'next/link';
import { Callout, Tab, Tabs } from 'nextra-theme-docs';

# å…¥é—¨

## å®‰è£… [#installation]

åœ¨é¡¹ç›®ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

<Tabs items={['pnpm', 'npm', 'yarn']}>
  <Tab>
    ```bash
    pnpm add dde-earth
    ```
  </Tab>
  <Tab>
    ```bash
    npm i dde-earth
    ```
  </Tab>
  <Tab>
    ```bash
    yarn add dde-earth
    ```
  </Tab>
</Tabs>

## å¿«é€Ÿå¼€å§‹ [#quick-start]

åˆå§‹åŒ–åœ°çƒåªéœ€è¦ä¼ å…¥å…ƒç´ Idæˆ–è€…HTMLå…ƒç´ ã€‚

<Callout emoji="ğŸ’¡">
å¯é€‰çš„é…ç½®é¡¹åŒ…æ‹¬åœ°çƒèƒŒæ™¯è‰²ã€è‡ªå®šä¹‰å›½é™…åŒ–å†…å®¹ç­‰ï¼Œç‚¹å‡» <Link href="/docs/API">`è¿™é‡Œ`</Link> æŸ¥çœ‹è¯¦ç»†è¯´æ˜ã€‚
</Callout>

å¦‚æœä½ å·²ç»æœ‰åˆ›å»ºå¥½çš„Cesium `Viewer`å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥Earthæ„é€ å‡½æ•°ä¸­ï¼Œå³åˆ»æ‹¥æœ‰Earthå¯¹è±¡çš„æ‰€æœ‰èƒ½åŠ›ã€‚

```ts
import { Earth } from "dde-earth";

const earth = new Earth("container");
```

é»˜è®¤çš„åœ°çƒå¯¹è±¡åªæ‹¥æœ‰å°‘æ•°çš„åŠŸèƒ½ï¼Œå¦‚äºŒä¸‰ç»´åˆ‡æ¢ã€é‡ç½®é»˜è®¤è§†è§’ç­‰ã€‚éœ€è¦æ·»åŠ æ›´å¤šæ’ä»¶æ‰èƒ½å®ç°è¯¸å¦‚å›¾å±‚æ·»åŠ ã€åœ°çƒäº‹ä»¶è®¢é˜…ç­‰èƒ½åŠ›ã€‚

## æ·»åŠ æ’ä»¶ [#add-plugins]

æ·»åŠ ä¸€ä¸ªæ’ä»¶éå¸¸å®¹æ˜“ï¼Œå®˜æ–¹æä¾›äº†ä¸€äº›å¸¸ç”¨çš„æ’ä»¶ï¼Œä¸‹è½½npmåŒ…åï¼Œåªéœ€å‡ è¡Œä»£ç å³å¯åœ¨Earthå¯¹è±¡ä¸Šè·å¾—æ’ä»¶æ‹“å±•çš„èƒ½åŠ›ã€‚

```ts
import { Earth } from "dde-earth";
import { LayerLoaders } from "@dde-earth/recommend-plugins";

const earth = new Earth("container");

// ä½¿ç”¨åŸºç¡€å›¾å±‚æ·»åŠ æ’ä»¶
earth.usePlugin(new LayerLoaders());
```

`LayerLoaders`æ’ä»¶æ”¯æŒæ·»åŠ è¯¸å¤šCesiumåŸç”Ÿæ”¯æŒçš„åœ°å›¾æœåŠ¡åè®®

```ts
// æ·»åŠ arcgiså›¾å±‚
const arcgisLayer = await earth.addLayer({
  url: "https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",
  enablePickFeatures: false,
  method: "arcgis",
});

// æ·»åŠ tmså›¾å±‚
const tmsLayer = await earth.addLayer({
  id: "scotese",
  url: "https://alpha.deep-time.org/tms/Scotese2018/5304326/{z}/{x}/{reverseY}.png",
  srs: "EPSG:4326", // é»˜è®¤æ”¯æŒ4326å’Œ3857æŠ•å½±
  method: "tms",
});
```

åˆ›å»ºå®Œæˆçš„åœ°å›¾å¯¹è±¡é›†æˆäº†ç¼©æ”¾ã€æ¸²æŸ“ç­‰å¸¸ç”¨å›¾å±‚æ“ä½œ

```ts
// è°ƒæ•´æ¸²æŸ“å‚æ•°
tmsLayer.render({
  alpha: 0.5
});

// ç¼©æ”¾åˆ°åœ°å›¾
tmsLayer.zoomTo();

// éšè—å›¾å±‚
tmsLayer.show = false;
```

ç§»é™¤å›¾å±‚å¯ä»¥ç›´æ¥åœ¨åœ°å›¾å¯¹è±¡ä¸Šä½¿ç”¨`remove`æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨earthå¯¹è±¡ä¸Šçš„`removeLayer`æ–¹æ³•

```ts
// ä½¿ç”¨å›¾å±‚idç§»é™¤å›¾å±‚
earth.removeLayer("scotese");

// ä½¿ç”¨å›¾å±‚å¯¹è±¡ç§»é™¤å›¾å±‚
earth.removeLayer(tmsLayer);

// ç›´æ¥åœ¨å›¾å±‚å¯¹è±¡ä¸Šè°ƒç”¨ç§»é™¤æ–¹æ³•
tmsLayer.remove();
```

å¯¹å›¾å±‚è¿›è¡Œæ“ä½œå‰ï¼Œä½ å¯ä»¥æ·»åŠ ç›‘å¬äº‹ä»¶ï¼Œç›‘å¬å›¾å±‚çš„æ·»åŠ ã€æ¸²æŸ“ã€ç§»é™¤æ“ä½œ

```ts
// æ·»åŠ å›¾å±‚æ¸²æŸ“ç›‘å¬äº‹ä»¶
earth.on("layer:render", (layerItem) => {
  console.log("render", layerItem);
});
```
